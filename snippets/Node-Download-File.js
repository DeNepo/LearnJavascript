// Generated by CoffeeScript 1.9.3
var download, fs, http;

http = require('https');

fs = require('fs');

download = function(url, dest, cb) {
  var file, request;
  file = fs.createWriteStream(dest);
  request = http.get(url, function(response) {
    console.log("Downloading...");
    response.pipe(file);
    file.on('finish', function() {
      file.close(cb);
      console.log("Download finished.");
    });
  }).on('error', function(err) {
    fs.unlink(dest);
    if (cb) {
      cb(err.message);
    }
  });
};

download("https://wordpress.org/latest.zip", "./latest.zip");
